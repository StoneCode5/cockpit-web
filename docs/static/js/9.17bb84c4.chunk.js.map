{"version":3,"sources":["components/DashBoard/Container/index.tsx","components/CustomBackground/index.tsx","components/NumberAndTitle/index.tsx","components/Ndbf/index.tsx","components/DashBoard/withContainer.tsx"],"names":["Container","props","children","attr","id","x","y","w","h","deg","opacity","styles","width","height","left","top","transform","style","className","CustomBackground","typeNo","custom","background","WithContainer","NumberAndTitle","data","textStyle","textAlign","surfix","isThousands","useState","current","setCurrent","useEffect","setTimeout","animateValue","curr","String","replace","yearTotalPremium","insure","type","colorA","colorB","fontWeight","color","fontSize","aPremium","bPremium","unifyPremium","carPremium","notCarPropertyPremium","notCarAccidentHealthPremium","WrappedComponent","config","ComponentConfig","cacheRepeatRequest","source","componentData"],"mappings":"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","file":"static/js/9.17bb84c4.chunk.js","sourcesContent":["import React from 'react';\r\n\r\ninterface Attr {\r\n    x: number;\r\n    y: number;\r\n    w: number;\r\n    h: number;\r\n    deg: number;\r\n    opacity: number;\r\n}\r\n\r\ninterface Props {\r\n    attr: Attr\r\n    id: string\r\n}\r\n\r\nconst Container: React.FC<Props> = (props) => {\r\n  const {children, attr, id} = props;\r\n  const {x , y , w , h, deg, opacity} = attr\r\n\r\n  const styles = {\r\n      width: w || 0,\r\n      height: h || 0,\r\n      left: x || 0,\r\n      top: y ||0 ,\r\n      transform: `rotate(${deg || 0}deg)`,\r\n      opacity: opacity || 1,\r\n  }\r\n  \r\n  return <div style={styles} className=\"absolute\" data-id={id}>\r\n      {children}\r\n  </div>;\r\n};\r\n\r\nexport default Container;","import React from \"react\";\r\nimport { WithContainer } from \"../DashBoard/withContainer\";\r\nimport \"./index.less\";\r\n\r\ninterface Props {\r\n  typeNo: number;\r\n  custom?: boolean\r\n  background?: any;\r\n}\r\n\r\nexport const CustomBackground = (props: Props) => {\r\n  const { typeNo = 1, custom = false, background = {} } = props;\r\n  return custom ? <div style={{ ...background }} /> : <div className={`background-layer bl-no-${typeNo}`} />;\r\n\r\n};\r\n\r\nexport default WithContainer(CustomBackground);\r\n","import React, {useState, useEffect} from \"react\";\r\nimport { WithContainer } from \"../DashBoard/withContainer\";\r\nimport { animateValue } from \"../../utils/utils\";\r\n\r\nexport const NumberAndTitle = (props: any) => {\r\n  const { data, textStyle = {}, textAlign='left', surfix = '元' , isThousands = false} = props;\r\n  const [current, setCurrent] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      animateValue(current, data || 0, 500, (curr) => {\r\n        setCurrent(curr)\r\n      })\r\n    }, 1000);\r\n  }, [data]);\r\n\r\n  return (\r\n    <div\r\n    style={{...textStyle, textAlign}}\r\n  >\r\n    {/* {data.value.toFixed().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")} */}\r\n    {isThousands?String(current).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\"):current}{surfix}\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default WithContainer(NumberAndTitle);\r\n","import React from \"react\";\r\nimport { NumberAndTitle } from \"../NumberAndTitle\";\r\nimport { CustomBackground } from \"../CustomBackground\";\r\nimport { WithContainer } from \"../DashBoard/withContainer\";\r\nimport \"./index.less\";\r\n\r\nfunction Ndbf(props: any) {\r\n  const { data = {} } = props;\r\n  const { yearTotalPremium, insure, type } = data;\r\n  const colorA = \"#5D80FF\";\r\n  const colorB = \"#F6AA14\";\r\n  return (\r\n    <div className=\"ndbfContainer\">\r\n      <div className=\"ndbf-title\">\r\n        <CustomBackground typeNo={22} />\r\n        <div className=\"mainTitle\">保费收入(万)</div>\r\n        <CustomBackground typeNo={23} />\r\n      </div>\r\n      <div className=\"ndbf-bottomBox\">\r\n        <div className=\"ndbf-totalBox\">\r\n          <div className=\"subTitle\" style={{ fontWeight: 700 }}>\r\n            总数\r\n          </div>\r\n          <NumberAndTitle\r\n            isThousands\r\n            data={yearTotalPremium}\r\n            surfix=\"\"\r\n            textStyle={{ color: \"#fff\", fontSize: 24 }}\r\n          />\r\n        </div>\r\n        <div className=\"ndbf-items\">\r\n          <div className=\"ndbf-item\">\r\n            <div className=\"subTitle\">A类</div>\r\n            <NumberAndTitle\r\n              isThousands\r\n              data={type.aPremium}\r\n              surfix=\"\"\r\n              textStyle={{ color: colorA, fontSize: 16 }}\r\n            />\r\n          </div>\r\n          <div className=\"ndbf-item\">\r\n            <div className=\"subTitle\">B类</div>\r\n            <NumberAndTitle\r\n              isThousands\r\n              data={type.bPremium}\r\n              surfix=\"\"\r\n              textStyle={{ color: colorA, fontSize: 16 }}\r\n            />\r\n          </div>\r\n          <div className=\"ndbf-item\">\r\n            <div className=\"subTitle\">统保</div>\r\n            <NumberAndTitle\r\n              isThousands\r\n              data={type.unifyPremium}\r\n              surfix=\"\"\r\n              textStyle={{ color: colorA, fontSize: 16 }}\r\n            />\r\n          </div>\r\n          <div className=\"ndbf-item\">\r\n            <div className=\"subTitle\">车险</div>\r\n            <NumberAndTitle\r\n              isThousands\r\n              data={insure.carPremium}\r\n              surfix=\"\"\r\n              textStyle={{ color: colorB, fontSize: 16 }}\r\n            />\r\n          </div>\r\n          <div className=\"ndbf-item\">\r\n            <div className=\"subTitle\">财产险</div>\r\n            <NumberAndTitle\r\n              isThousands\r\n              data={insure.notCarPropertyPremium}\r\n              surfix=\"\"\r\n              textStyle={{ color: colorB, fontSize: 16 }}\r\n            />\r\n          </div>\r\n          <div className=\"ndbf-item\">\r\n            <div className=\"subTitle\">意健险</div>\r\n            <NumberAndTitle\r\n              isThousands\r\n              data={insure.notCarAccidentHealthPremium}\r\n              surfix=\"\"\r\n              textStyle={{ color: colorB, fontSize: 16 }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WithContainer(Ndbf);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Container from \"./Container\";\r\nimport request from \"../../utils/request\";\r\nimport { RequestThrottle } from \"./utils\";\r\n\r\ninterface Props {\r\n  config: DashBoard.Layer;\r\n  cacheRepeatRequest: boolean \r\n}\r\n\r\nexport function WithContainer(WrappedComponent: any) {\r\n  const ContainerFC: React.FC<Props> = (props) => {\r\n    const { config, cacheRepeatRequest } = props;\r\n    const {\r\n      config: ComponentConfig,\r\n      attr,\r\n      data,\r\n      data: { source },\r\n      id,\r\n    } = config;\r\n\r\n    const [componentData, setComponentData] = useState(source);\r\n    // useEffect(() => {\r\n    //   // 这一层去改变数据\r\n    //   const { autoUpdate, api = { url: \"\", method: \"get\", staleTime: 5 * 1000, handleRes: (res:any) => res } } = data;\r\n    //   const { url, method, staleTime, handleRes } = api;\r\n\r\n    //   const appendRequest = (RequestThrottle:any) => {\r\n    //     RequestThrottle.appendUrl(url);\r\n    //     request[method](url).then((res) => {\r\n    //       if (res.code === \"00000\") {\r\n    //         RequestThrottle.updateUrlRes(url, res);\r\n    //         const cData = handleRes? handleRes(res.data) : res.data\r\n    //         setComponentData(cData);\r\n    //       }\r\n    //     });\r\n    //   }\r\n\r\n    //   if (autoUpdate && typeof autoUpdate === \"number\") {\r\n    //     const id = setInterval(() => {\r\n    //       if (cacheRepeatRequest) {\r\n    //         const requestUrl = RequestThrottle.getUrlFromUrls(url);\r\n    //         // 有正在请求的相同的请求\r\n    //         if (requestUrl) {\r\n    //           //请求中\r\n    //           if (requestUrl.status === \"pendding\") {\r\n    //             RequestThrottle.subscribe(url, (res: any) => {\r\n    //               if (res.code === \"00000\") {\r\n    //                 const cData = handleRes? handleRes(res.data) : res.data\r\n    //                 setComponentData(cData);\r\n    //               }\r\n    //             });\r\n    //           } else {\r\n    //             // 有请求成功的相同请求\r\n    //             const cha = new Date().getTime() - requestUrl.startTime;\r\n    //             // 该请求还未过有效期\r\n    //             if (cha >= staleTime) {\r\n    //               appendRequest(RequestThrottle)\r\n    //             } else {\r\n    //               // 过了有效期 重新发起请求\r\n    //               const { res } = requestUrl;\r\n    //               if (res.code === \"00000\") {\r\n    //                 const cData = handleRes? handleRes(res.data) : res.data\r\n    //                 setComponentData(cData);\r\n    //               }\r\n    //             }\r\n    //           }\r\n    //         } else {\r\n    //           // 之前没有过相同的请求\r\n    //           appendRequest(RequestThrottle)\r\n    //         }\r\n    //       } else {\r\n    //         request[method](url).then((res) => {\r\n    //           if (res.code === \"00000\") {\r\n    //             const cData = handleRes? handleRes(res.data) : res.data\r\n    //             setComponentData(cData);\r\n    //           }\r\n    //         });\r\n    //       }\r\n    //     }, autoUpdate);\r\n\r\n    //     return () => {\r\n    //       clearInterval(id);\r\n    //     };\r\n    //   }\r\n    // }, []);\r\n\r\n    return (\r\n      <Container attr={attr} id={id}>\r\n        <WrappedComponent {...ComponentConfig} data={componentData} />\r\n      </Container>\r\n    );\r\n  };\r\n  return ContainerFC;\r\n}\r\n"],"sourceRoot":""}